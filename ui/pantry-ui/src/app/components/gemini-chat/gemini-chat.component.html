<div class="gemini-layout">
  <!-- Sidebar -->
  <aside class="sidebar" *ngIf="showSidebar || !isMobile">
    <button class="new-chat-btn" (click)="newChat()">
      <span class="icon">+</span> New Chat
    </button>
    <div class="chat-tabs">
      <button [class.active]="currentTab === 'adhoc'" (click)="setTab('adhoc')">Ad-hoc</button>
      <button [class.active]="currentTab === 'recipe'" (click)="setTab('recipe')">Recipes</button>
      <button [class.active]="currentTab === 'product'" (click)="setTab('product')">Products</button>
    </div>

    <div class="session-list">
      <div *ngFor="let session of filteredSessions" class="session-item"
        [class.active]="session.id === currentSessionId" (click)="loadSession(session.id)">
        <span class="session-title">{{ session.title }}</span>
        <button class="delete-btn" (click)="deleteSession(session.id, $event)" title="Delete Chat">ğŸ—‘ï¸</button>
      </div>
    </div>
  </aside>

  <!-- Main Chat -->
  <main class="main-chat" *ngIf="!showSidebar || !isMobile">
    <div *ngIf="isMobile" class="mobile-header">
      <button class="back-btn" (click)="backToSessions()">â† Back</button>
      <span class="mobile-title">Smart Chat</span>
      <button *ngIf="currentSessionId" (click)="openDebugLog()" title="View Debug Logs"
        style="margin-left: auto; background: none; border: none;">ğŸ</button>
    </div>

    <div *ngIf="!isMobile && currentSessionId" class="desktop-header"
      style="display: flex; justify-content: flex-end; padding: 10px;">
      <button (click)="openDebugLog()"
        style="background: #f0f0f0; border: 1px solid #ccc; border-radius: 4px; padding: 5px 10px; cursor: pointer;">ğŸ
        View Debug Log</button>
    </div>

    <app-chat-interface [messages]="messages" [isLoading]="isLoading" [loadingText]="loadingText"
      [showWelcomeMessage]="true" (send)="handleSend($event)">
    </app-chat-interface>
  </main>
</div>