version: '2'

services:
  pantry-api:
    build: ./api
    container_name: pantry-api-dev
    ports:
      - 4300:4300
    env_file:
      - stack.dev.env
    environment:
      - PLAYWRIGHT_MCP_HOST=${PLAYWRIGHT_MCP_HOST:-playwright-mcp-dev}
      - PLAYWRIGHT_MCP_PORT=${PLAYWRIGHT_MCP_PORT:-8931}
      - PLAYWRIGHT_NOVNC_HOST=${PLAYWRIGHT_NOVNC_HOST:-playwright-mcp-dev}
      - PLAYWRIGHT_NOVNC_PORT=${PLAYWRIGHT_NOVNC_PORT:-6080}
    volumes:
      - pantry_data:/app/data
  pantry-ui:
    build: ./ui/pantry-ui
    container_name: pantry-ui-dev
    ports:
      - 4200:4200
    env_file:
      - stack.dev.env

  playwright-mcp:
    build: ./playwright-mcp
    container_name: playwright-mcp-dev
    ports:
      - 5900:5900 # VNC
      - 6080:6080 # noVNC web interface
      - 8931:8931 # Playwright MCP HTTP API
    environment:
      - VNC_PASSWORD=playwright
      - SCREEN_WIDTH=1920
      - SCREEN_HEIGHT=1080

volumes:
  pantry_data:
